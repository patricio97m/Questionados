<main class="pt-3 container mt-2 p-4 border rounded col-md-6 footer-final bg-white">
    {{#alertaVerificacion}}
        <div class="alert alert-primary" role="alert">
            {{alertaVerificacion}}
        </div>
    {{/alertaVerificacion}}

    <div class="text-center">
        <h1 class="bg-primary text-uppercase d-inline px-3 text-light">Mi perfil</h1>
    </div>

    <div class="container rounded p-4">
        {{#usuario}}
            <div class="d-flex align-items-center justify-content-center mb-3">
                <img src="{{fotoPerfil}}" alt="Imagen-de-usuario" width="150" height="150" class="rounded-circle img-fluid"/>
                <h2 class="ms-3">
                    {{nombre}} {{apellido}}
                </h2>
            </div>

            {{#error}}
                <div class="alert alert-danger" role="alert">
                    {{error}}
                </div>
            {{/error}}
            {{#exito}}
                <div class="alert alert-success" role="alert">
                    {{exito}}
                </div>
            {{/exito}}

        <form method="post" action="/usuario/actualizarUsuario" enctype="multipart/form-data">
            <div class="input-group mb-3">
                <span class="input-group-text" id="nombre">Nombre</span>
                <input required type="text" class="form-control" placeholder="Ingrese un nombre" {{editable}} aria-label="nombre" aria-describedby="nombre" name="nombre" value="{{nombre}}">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text" id="apellido">Apellido</span>
                <input required type="text" class="form-control" placeholder="Ingrese un apellido" {{editable}} aria-label="apellido" aria-describedby="apellido" name="apellido" value="{{apellido}}">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text" id="fecha_nac">Fecha nac.</span>
                <input required type="date" class="form-control" {{editable}} aria-label="fecha_nac" aria-describedby="fecha_nac" name="fecha_nac" value="{{fecha_nac}}">
            </div>
            {{^actualizarDatos}}
            <div class="input-group mb-3">
                <span class="input-group-text" id="sexo">Sexo</span>
                <input type="text" class="form-control" aria-label="sexo" aria-describedby="sexo" disabled value="{{sexo}}">
            </div>
            {{/actualizarDatos}}

            {{#actualizarDatos}}
            <div class="input-group mb-3">
                <span class="input-group-text" id="sexo">Sexo</span>
                <select class="form-control" id="sexo" {{editable}} name="sexo">
                    <option>Hombre</option>
                    <option>Mujer</option>
                    <option>Prefiero no cargarlo</option>
                </select>
            </div>
            {{/actualizarDatos}}

            <div class="input-group mb-3">
                <span class="input-group-text" id="mail">Email</span>
                <input required type="text" class="form-control" placeholder="mail" aria-label="mail" aria-describedby="mail" {{editable}} name="mail" value="{{mail}}">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text" id="usuario">Usuario</span>
                <input required type="text" class="form-control" placeholder="usuario" aria-label="usuario" aria-describedby="usuario" {{editable}} name="usuario" value="{{usuario}}">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text" id="contrasena">Contraseña</span>
                <input required type="password" class="form-control" placeholder="contrasena" aria-label="contrasena" aria-describedby="contrasena" {{editable}} name="contrasena" value="{{contrasena}}">
            </div>

            <div class="input-group mb-3">
                <span class="input-group-text" id="ubicacion">Ubicación</span>
                <input type="text" class="form-control" id="locationInput" aria-label="locationInput" aria-describedby="locationInput" {{editable}} value="{{ciudad}}, {{pais}}" required>
            </div>

            <div id="map" style="width: 100%; height: 250px;" class="mb-2 rounded"></div>

            <input type="text" id="ciudad" value="{{ciudad}}" name="ciudad" hidden="hidden">
            <input type="text" id="pais" value="{{pais}}" name="pais" hidden="hidden">
        {{/usuario}}

        {{#cambiarFoto}}
            <div class="form-group">
                <label for="foto_perfil">Actualizar imagen de perfil:</label>
                <div class="custom-file mt-1">
                    <input type="file" class="form-control" id="foto_perfil" name="foto_perfil" accept="image/*">
                </div>
            </div>
        {{/cambiarFoto}}

            <div class="d-flex justify-content-between mt-4">
                {{#modificaDatos}}
                    <a href="/usuario/cerrarSesion" class="btn btn-secondary">Cerrar sesión</a>
                    <a class="btn btn-primary" href="/usuario/editar">Modificar datos</a>
                {{/modificaDatos}}
                {{#actualizarDatos}}
                    <a href="/usuario/perfil" class="btn btn-danger">Cancelar cambios</a>
                    <button type="submit" class="btn btn-primary" >
                        Actualizar datos
                    </button>
                {{/actualizarDatos}}
            </div>
        </form>
    </div>
</main>
<script src="https://maps.googleapis.com/maps/api/js?key={{mapsAPI}}&libraries=places"></script>
{{^actualizarDatos}}<script src="../public/js/mostrarDatosMapa.js"></script>{{/actualizarDatos}}
{{#actualizarDatos}}<script src="../public/js/cargarDatosMapa.js"></script>{{/actualizarDatos}}

